#:kivy 1.8.0

#:set padding_base 8
#:set sm_button_width 36

<HistoryInput@BoxLayout>
    height: input_label.height
    orientation: 'horizontal'
    size_hint: 1, None
    line_num: "0"
    input_text: "???"
    Button:
        halign: 'right'
        size_hint: None, 1
        text: root.line_num
        text_size: self.width - sp(padding_base), None
        width: sp(sm_button_width)
    Label:
        id: input_label
        height: self.texture_size[1] + sp(padding_base)
        size_hint: 1, None
        text: root.input_text
        text_size: self.width, None
    Button:
        text: 'R'
        size_hint: None, 1
        width: sp(sm_button_width)

<HistoryOutput@BoxLayout>
    height: output_label.height
    orientation: 'horizontal'
    size_hint: 1, None
    line_num: "0"
    output_text: "???"
    Button:
        halign: 'right'
        size_hint: None, 1
        text: root.line_num
        text_size: self.width - sp(padding_base), None
        width: sp(sm_button_width)
    Label:
        height: self.texture_size[1] + sp(padding_base)
        id: output_label
        size_hint: 1, None
        text: root.output_text
        text_size: self.size[0], None

<Krepla>:
    orientation: 'vertical'
    padding: sp(padding_base), sp(padding_base)
    ActionBar:
        id: action_bar
        ActionView:
            use_separator: True
            ActionPrevious:
                title: 'PAKIFA'
                with_previous: False
            ActionOverflow:
            ActionGroup:
                text: 'File'
                ActionButton:
                    text: 'Save'
                ActionButton:
                    text: 'Open'
                ActionButton:
                    text: 'Quit'
    ScrollView:
        BoxLayout:
            minimum_height: sum([child.height for child in self.children])
            orientation: 'vertical'
            size_hint: 1, None
            HistoryInput:
                line_num: "1"
                input_text: "This is the first line of input."
            HistoryOutput:
                line_num: "2"
                output_text: "This is the first line of output."
            HistoryInput:
                line_num: "3"
                input_text: "This is a really long \n input line."
            HistoryOutput:
                line_num: "400"
                output_text: "This is a really \n long output line."
    BoxLayout:
        height: prompt_label.height
        orientation: 'horizontal'
        size_hint: 1, None
        Label:
            height: self.texture_size[1] + sp(padding_base)
            id: prompt_label
            size_hint: None, 1
            text: ">>>"
            width: sp(sm_button_width)
        TextInput:
            height: 
            id: main_input.height
            multiline: False
        Button:
            size_hint: None, 1
            text: "Enter"
            width: self.texture_size[0] + (2 * sp(padding_base))
